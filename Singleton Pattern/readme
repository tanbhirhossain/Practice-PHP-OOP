ржПржЦржи ржЖржорж░рж╛ ржЖржорж╛ржжрзЗрж░ ржкрж░ржмрж░рзНрждрзА ржПржмржВ ржЕрждрзНржпржирзНржд ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржПржХржЯрж┐ ржЕрзНржпрж╛ржбржнрж╛ржирзНрж╕ржб ржЯржкрж┐ржХ: Database Connection & Singleton Pattern ржирж┐рзЯрзЗ ржЖрж▓рзЛржЪржирж╛ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

Singleton Pattern ржХрж┐ ржПржмржВ ржХрзЗржи? ЁЯПЧя╕П
ржмрж╛рж╕рзНрждржм ржЬрзАржмржирзЗ ржПржХржЯрж┐ ржмрзЬ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗ рж╣рж╛ржЬрж╛рж░ рж╣рж╛ржЬрж╛рж░ ржЗржЙржЬрж╛рж░ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред ржЖржорж░рж╛ ржпржжрж┐ ржкрзНрж░рждрж┐ржмрж╛рж░ ржбрж╛ржЯрж╛ржмрзЗржЬ ржЕржкрж╛рж░рзЗрж╢ржи ржХрж░рж╛рж░ рж╕ржорзЯ ржирждрзБржи ржХрж░рзЗ ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐ ржХрж░рж┐, рждржмрзЗ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржорзЗржорзЛрж░рж┐ ржжрзНрж░рзБржд рж╢рзЗрж╖ рж╣рзЯрзЗ ржпрж╛ржмрзЗред

Singleton Pattern ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпрзЗ:

ржкрзБрж░рзЛ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржЪрж▓рж╛ржХрж╛рж▓рзАржи ржПржХржЯрж┐ ржХрзНрж▓рж╛рж╕рзЗрж░ ржорж╛рждрзНрж░ ржПржХржЯрж┐ржЗ ржЕржмржЬрзЗржХрзНржЯ ржмрж╛ ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ (Instance) ржерж╛ржХржмрзЗред

ржУржЗ ржПржХржЯрж┐ ржХрж╛ржирзЗржХрж╢ржиржЗ рж╕ржмрж╛ржЗ рж╢рзЗрзЯрж╛рж░ ржХрж░ржмрзЗред

ржбрж╛ржЯрж╛ржмрзЗржЬ ржХрзНрж▓рж╛рж╕ рждрзИрж░рж┐ ржХрж░рж╛
ржПржХржЯрж┐ ржХрзНрж▓рж╛рж╕ржХрзЗ рж╕рж┐ржЩрзНржЧрзЗрж▓ржЯржи ржХрж░рждрзЗ рж╣рж▓рзЗ ржЖржорж╛ржжрзЗрж░ рждрж┐ржиржЯрж┐ ржХрж╛ржЬ ржХрж░рждрзЗ рж╣рзЯ:

Static Property: ржЕржмржЬрзЗржХрзНржЯржЯрж┐ ржзрж░рзЗ рж░рж╛ржЦрж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ ржкрзНрж░ржкрж╛рж░рзНржЯрж┐ (ржпрзЗржоржи: $instance) рж▓рж╛ржЧржмрзЗред

Private Constructor: ржпрзЗржи ржХрзЗржЙ ржХрзНрж▓рж╛рж╕рзЗрж░ ржмрж╛ржЗрж░рзЗ new Database() рж▓рж┐ржЦрзЗ ржирждрзБржи ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рждрзЗ ржирж╛ ржкрж╛рж░рзЗред

Static Method: ржПржХржЯрж┐ ржорзЗржержб (ржпрзЗржоржи: getInstance()) ржпрж╛ ржЪрзЗржХ ржХрж░ржмрзЗ ржЕржмржЬрзЗржХрзНржЯржЯрж┐ ржЖржЧрзЗ рждрзИрж░рж┐ рж╣рзЯрзЗржЫрзЗ ржХрж┐ржирж╛; ржирж╛ рж╣рзЯрзЗ ржерж╛ржХрж▓рзЗ рждрзИрж░рж┐ ржХрж░ржмрзЗ, ржЖрж░ рж╣рзЯрзЗ ржерж╛ржХрж▓рзЗ ржЖржЧрзЗрж░ржЯрж┐ржЗ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░ржмрзЗред

ржирж┐ржЪрзЗ ржПржХржЯрж┐ ржЦрж╕рзЬрж╛ ржХрзЛржб ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛ:



class Database {
    private static $instance = null;
    private $connection;

    // ржХрзНрж▓рж╛рж╕рзЗрж░ ржмрж╛ржЗрж░рзЗ ржерзЗржХрзЗ ржпрзЗржи new Database() ржХрж▓ ржХрж░рж╛ ржирж╛ ржпрж╛рзЯ
    private function __construct() {
        // ржПржЦрж╛ржирзЗ ржбрж╛ржЯрж╛ржмрзЗржЬ ржХрж╛ржирзЗржХрж╢ржи рж▓ржЬрж┐ржХ ржерж╛ржХрзЗ (ржпрзЗржоржи: PDO ржмрж╛ mysqli)
        $this->connection = "Connected to DB"; 
    }

    public static function getInstance() {
        if (self::$instance == null) {
            self::$instance = new Database();
        }
        return self::$instance;
    }

    public function getConnection() {
        return $this->connection;
    }
}


ржпржжрж┐ __construct() ржорзЗржержбржЯрж┐ public рж╣рждрзЛ, рждржмрзЗ ржпрзЗ ржХрзЗржЙ ржХрзЛржбрзЗрж░ ржпрзЗржХрзЛржирзЛ ржЬрж╛рзЯржЧрж╛рзЯ ржирж┐ржЪрзЗрж░ ржорждрзЛ ржХрж░рзЗ ржПржХрж╛ржзрж┐ржХ ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рждрзЛ:

PHP

$db1 = new Database();
$db2 = new Database();
$db3 = new Database();
ржПрждрзЗ ржкрзНрж░рждрж┐ржмрж╛рж░ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗрж░ рж╕рж╛ржерзЗ ржЖрж▓рж╛ржжрж╛ ржЖрж▓рж╛ржжрж╛ ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐ рж╣рждрзЛ, ржпрж╛ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржорзЗржорзЛрж░рж┐ ржУ ржкрзНрж░рж╕рзЗрж╕рж┐ржВ ржХрзНрж╖ржорждрж╛ ржирж╖рзНржЯ ржХрж░рждрзЛред ЁЯЦея╕П

ржХрж┐ржирзНрждрзБ ржХржирж╕рзНржЯрзНрж░рж╛ржХрзНржЯрж░ржХрзЗ private ржХрж░рж╛рж░ ржорж╛ржирзЗ рж╣рж▓рзЛ, ржЖржорж░рж╛ ржмрж╛ржЗрж░рзЗрж░ ржХрж╛ржЙржХрзЗ new ржХрж┐ржЙржУрзЯрж╛рж░рзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж╕рж░рж╛рж╕рж░рж┐ ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рждрзЗ ржжрж┐ржЪрзНржЫрж┐ ржирж╛ред ржПржЯрж┐ ржЕржирзЗржХржЯрж╛ ржПржХржЯрж┐ рж░рзБржорзЗрж░ ржжрж░ржЬрж╛рзЯ рждрж╛рж▓рж╛ ЁЯФТ рж▓рж╛ржЧрж┐рзЯрзЗ ржжрзЗржУрзЯрж╛рж░ ржорждрзЛ, ржпрж╛рж░ ржЪрж╛ржмрж┐ рж╢рзБржзрзБ ржУржЗ рж░рзБржорзЗрж░ ржирж┐ржЬрзЗрж░ ржХрж╛ржЫрзЗржЗ ржЖржЫрзЗред

ржПржЦржи ржпрзЗрж╣рзЗрждрзБ ржЖржорж░рж╛ ржмрж╛ржЗрж░рзЗ ржерзЗржХрзЗ new Database() рж▓рж┐ржЦрзЗ ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░ржЫрж┐ ржирж╛, рждрж╛рж╣рж▓рзЗ ржЖржорж╛ржжрзЗрж░ ржЖржЧрзЗрж░ ржХрзЛржб ржЕржирзБржпрж╛рзЯрзА ржбрж╛ржЯрж╛ржмрзЗржЬрзЗрж░ ржУржЗ ржПржХржЯрж┐ ржорж╛рждрзНрж░ ржЕржмржЬрзЗржХрзНржЯ ржкрж╛ржУрзЯрж╛рж░ ржЬржирзНржп ржЖржорж░рж╛ ржХрзЛржи static method ржЯрж┐ржХрзЗ ржХрж▓ ржХрж░ржм?


ржпрзЗрж╣рзЗрждрзБ ржЖржорж░рж╛ рж╕рж░рж╛рж╕рж░рж┐ new ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржЫрж┐ ржирж╛, рждрж╛ржЗ ржУржЗ ржПржХржЯрж┐ ржорж╛рждрзНрж░ ржЕржмржЬрзЗржХрзНржЯ ржкрж╛ржУрзЯрж╛рж░ ржЪрж╛ржмрж┐ржХрж╛ржарж┐ рж╣рж▓рзЛ ржЖржорж╛ржжрзЗрж░ рждрзИрж░рж┐ ржХрж░рж╛ рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ ржорзЗржержб: getInstance()ред ЁЯЧЭя╕П

ржЖржорж░рж╛ ржпржЦржи ржХрзЛржбрзЗ Database::getInstance() ржХрж▓ ржХрж░ржм, рждржЦржи ржПржЯрж┐ ржЪрзЗржХ ржХрж░ржмрзЗ ржЖржЧрзЗ ржХрзЛржирзЛ ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ рж╣рзЯрзЗржЫрзЗ ржХрж┐ ржирж╛ред ржпржжрж┐ ржирж╛ рж╣рзЯрзЗ ржерж╛ржХрзЗ, рждржмрзЗ ржПржЯрж┐ ржПржХржЯрж┐ ржирждрзБржи ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░ржмрзЗ ржПржмржВ рж╕рзЗржЯрж┐ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░ржмрзЗред ржЖрж░ ржпржжрж┐ ржЖржЧрзЗ ржерзЗржХрзЗржЗ рждрзИрж░рж┐ ржерж╛ржХрзЗ, рждржмрзЗ ржирждрзБржи ржХрж┐ржЫрзБ ржирж╛ ржХрж░рзЗ ржЖржЧрзЗрж░ ржЕржмржЬрзЗржХрзНржЯржЯрж┐ржЗ ржЖржорж╛ржжрзЗрж░ ржжрж┐рзЯрзЗ ржжрзЗржмрзЗред ЁЯФД

ржЪрж▓рзБржи, ржПржмрж╛рж░ ржЖржкржирж╛рж░ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ ржПржЗ ржХржирж╕рзЗржкрзНржЯржЯрж┐ ржкрзНрж░рзЯрзЛржЧ ржХрж░рж┐ред

ржЖржкржирж╛рж░ ржкрж░ржмрж░рзНрждрзА ржХрж╛ржЬ:
рзз. ржЖржкржирж╛рж░ ржкрзНрж░ржЬрзЗржХрзНржЯ ржлрзЛрж▓рзНржбрж╛рж░рзЗ Database.php ржирж╛ржорзЗ ржПржХржЯрж┐ ржирждрзБржи ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзБржиред ЁЯУД 

рзи. ржирж┐ржЪрзЗрж░ ржЕржВрж╢ржЧрзБрж▓рзЛ ржорж╛ржерж╛рзЯ рж░рзЗржЦрзЗ ржПржХржЯрж┐ Singleton Database ржХрзНрж▓рж╛рж╕ рж▓рж┐ржЦрзБржи:

ржПржХржЯрж┐ private static ржкрзНрж░ржкрж╛рж░рзНржЯрж┐ $instance ржпрж╛рж░ ржкрзНрж░рж╛ржержорж┐ржХ ржорж╛ржи рж╣ржмрзЗ nullред

ржПржХржЯрж┐ private ржХржирж╕рзНржЯрзНрж░рж╛ржХрзНржЯрж░ __construct()ред ржПрж░ ржнрзЗрждрж░рзЗ ржЖржкрж╛рждржд рж╢рзБржзрзБ ржПржХржЯрж┐ ржорзЗрж╕рзЗржЬ ржкрзНрж░рж┐ржирзНржЯ ржХрж░рзБржи: "Database Connected Successfully! ЁЯФМ"ред

ржПржХржЯрж┐ public static ржорзЗржержб getInstance() ржпрж╛ ржУржЗ $instance ржХрзЗ ржорзНржпрж╛ржирзЗржЬ ржХрж░ржмрзЗред